'From Pharo13.1.0SNAPSHOT of 13 October 2025 [Build information: Pharo-13.1.0+SNAPSHOT.build.705.sha.3ff27d6817cce1921739fdd49bd8a14301cefe74 (64 Bit)] on 16 October 2025 at 1:33:10.26 am'!BorderedMorph subclass: #SnakeGameMorph	instanceVariableNames: 'game cellSize stepTime'	classVariableNames: ''	package: 'SnakeGame'!!SnakeGameMorph methodsFor: 'initialization' stamp: '2025-10-13T22:59:02.044-05:00'!initialize	super initialize.	game := SnakeGame new.	cellSize := 20.	self updateStepTime.	self extent: game level width * cellSize @ (game level height * cellSize).	self color: Color black.	self borderWidth: 2.	self borderColor: Color white.	self startStepping! !!SnakeGameMorph methodsFor: 'drawing' stamp: '2025-10-13T23:04:12.878-05:00'!drawOn: aCanvas	| scoreText levelText foodText hudHeight hudRect foodRect |	super drawOn: aCanvas.		"Dibujar obst√°culos"	game level obstacles do: [ :obstacle |		| rect |		rect := Rectangle			origin: (obstacle x - 1) * cellSize @ ((obstacle y - 1) * cellSize)			extent: cellSize @ cellSize.		rect := rect translateBy: self position.		aCanvas fillRectangle: rect color: Color gray ].		"Dibujar la serpiente"	game snake body doWithIndex: [ :segment :index |		| rect color |		rect := Rectangle			origin: (segment x - 1) * cellSize @ ((segment y - 1) * cellSize)			extent: cellSize @ cellSize.		rect := rect translateBy: self position.		color := index = 1			ifTrue: [ Color yellow ]			ifFalse: [ Color green ].		aCanvas fillRectangle: rect color: color ].		"Dibujar la comida"	foodRect := Rectangle		origin: (game food position x - 1) * cellSize @ ((game food position y - 1) * cellSize)		extent: cellSize @ cellSize.	foodRect := foodRect translateBy: self position.	aCanvas fillRectangle: foodRect color: Color red.		"Dibujar fondo del HUD"	hudHeight := 50.	hudRect := Rectangle		origin: self position x @ (self position y + (game level height * cellSize) - hudHeight)		extent: (game level width * cellSize) @ hudHeight.	aCanvas fillRectangle: hudRect color: (Color black alpha: 0.7).		"Dibujar HUD"	scoreText := 'Score: ' , game score asString.	levelText := '  Level: ' , game currentLevel asString.	foodText := '  Food: ' , game foodEaten asString , '/' , game level foodRequired asString.		aCanvas		drawString: scoreText , levelText , foodText		at: self position + (10 @ (game level height * cellSize - 40))		font: (LogicalFont familyName: 'Arial' pointSize: 14)		color: Color white.		"Nombre del nivel"	aCanvas		drawString: game level name		at: self position + (10 @ (game level height * cellSize - 20))		font: (LogicalFont familyName: 'Arial' pointSize: 12)		color: Color cyan.		"Dibujar Game Over"	game isGameOver ifTrue: [		| msg |		msg := 'GAME OVER - Press R to restart'.		aCanvas			drawString: msg			at: self position + (50 @ (game level height * cellSize // 2))			font: (LogicalFont familyName: 'Arial' pointSize: 14)			color: Color yellow ].		"Dibujar Victoria"	game hasWon ifTrue: [		| msg |		msg := 'YOU WIN!! All levels completed!!'.		aCanvas			drawString: msg			at: self position + (40 @ (game level height * cellSize // 2))			font: (LogicalFont familyName: 'Arial' pointSize: 14)			color: Color green ]! !!SnakeGameMorph methodsFor: 'stepping and presenter' stamp: '2025-10-13T22:34:19.582-05:00'!step	(game isGameOver not and: [ game hasWon not ]) ifTrue: [		game update.		self updateStepTime.		self changed ]! !!SnakeGameMorph methodsFor: 'stepping and presenter' stamp: '2025-10-13T22:34:27.951-05:00'!stepTime	^ stepTime! !!SnakeGameMorph methodsFor: 'event handling' stamp: '2025-10-13T17:06:19.523-05:00'!handlesKeyboard: evt	^ true! !!SnakeGameMorph methodsFor: 'event handling' stamp: '2025-10-13T22:34:47.749-05:00'!keyStroke: evt	evt keyCharacter = $w ifTrue: [ game setDirection: Direction up ].	evt keyCharacter = $s ifTrue: [ game setDirection: Direction down ].	evt keyCharacter = $a ifTrue: [ game setDirection: Direction left ].	evt keyCharacter = $d ifTrue: [ game setDirection: Direction right ].	evt keyCharacter = $r ifTrue: [		(game isGameOver or: [ game hasWon ]) ifTrue: [			game := SnakeGame new.			self updateStepTime.			self changed ] ]! !!SnakeGameMorph methodsFor: 'as yet unclassified' stamp: '2025-10-13T22:32:25.768-05:00'!updateStepTime	stepTime := game level speed! !